<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Productos - YATA</title>
    <link rel="stylesheet" href="sass/styles.css?v=1.5">
</head>
<body data-json="./data/productos.json">
    
    <div class="page-wrapper">
        <!-- Header -->
        <div class="menu-header menu-header-phone">
            <div class="logotipo">
                <img src="img/logo/logo_yard_sale.svg" alt="YATA">
            </div>
            <nav class="menu">
                <a class="btn-menu" href="index.html">Cat√°logo Clientes</a>
                <a class="btn-menu" href="catalogo-mayoristas.html">Cat√°logo Mayoristas</a>
                <a class="btn-menu active" href="admin-productos.html">Admin Productos</a>
            </nav>
        </div>

        <!-- Panel de Administraci√≥n -->
        <section class="panel-admin">
            <div class="container-1">
                <h1>üß∞ Administraci√≥n de Productos</h1>
                
                <!-- Controles Principales -->
                <div class="admin-controls">
                    <button class="btn-admin btn-crear" onclick="mostrarFormularioCrear()">
                        Ôºã Crear Nuevo Producto
                    </button>
                    <button class="btn-admin btn-exportar" onclick="exportarProductos()">
                        üìä Exportar CSV
                    </button>
                    <button class="btn-admin btn-recargar" onclick="cargarProductos()">
                        üîÑ Recargar Datos
                    </button>
                </div>

                <!-- Formulario Crear/Editar -->
                <div id="formulario-producto" class="formulario-producto" style="display: none;">
                    <h3 id="titulo-formulario">Crear Nuevo Producto</h3>
                    <form id="form-producto" onsubmit="guardarProducto(event)">
                        <input type="hidden" id="producto-id">
                        
                        <div class="form-grid">
                            <!-- Columna 1 -->
                            <div class="form-group">
                                <label for="codigo">C√≥digo *</label>
                                <input type="text" id="codigo" required placeholder="YATA-001">
                            </div>
                            <div class="form-group">
                                <label for="nombre">Nombre del Producto *</label>
                                <input type="text" id="nombre" required placeholder="Difusor Aroma Fresa">
                            </div>
                            <div class="form-group">
                                <label for="categoria">Categor√≠a *</label>
                                <select id="categoria" required>
                                    <option value="">Seleccionar categor√≠a</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="precio">Precio ($) *</label>
                                <input type="number" id="precio" step="0.01" min="0" required placeholder="1.00">
                            </div>

                            <!-- Columna 2 -->
                            <div class="form-group">
                                <label for="iva">IVA (%)</label>
                                <input type="number" id="iva" value="12" step="0.01" min="0" max="100">
                            </div>
                            <div class="form-group">
                                <label for="presentacion">Presentaci√≥n</label>
                                <input type="text" id="presentacion" placeholder="Caja x 12 unidades">
                            </div>
                            <div class="form-group">
                                <label for="unidad">Unidad</label>
                                <input type="text" id="unidad" value="unidad" placeholder="unidad">
                            </div>
                            <div class="form-group">
                                <label for="estado">Estado</label>
                                <select id="estado">
                                    <option value="activo">Activo</option>
                                    <option value="inactivo">Inactivo</option>
                                </select>
                            </div>

                            <!-- Campos de ancho completo -->
                            <div class="form-group full-width">
                                <label for="descripcionCorta">Descripci√≥n Corta *</label>
                                <textarea id="descripcionCorta" required placeholder="Breve descripci√≥n para el cat√°logo"></textarea>
                            </div>
                            <div class="form-group full-width">
                                <label for="descripcionDetallada">Descripci√≥n Detallada</label>
                                <textarea id="descripcionDetallada" rows="3" placeholder="Descripci√≥n completa del producto"></textarea>
                            </div>
                            <div class="form-group full-width">
                                <label for="imagen">URL de Imagen</label>
                                <input type="url" id="imagen" placeholder="https://res.cloudinary.com/.../imagen.jpg">
                                <small>Usa Cloudinary o cualquier servicio de hosting de im√°genes</small>
                            </div>
                            <div class="form-group full-width">
                                <label for="notas">Notas Internas</label>
                                <textarea id="notas" rows="2" placeholder="Informaci√≥n adicional para uso interno"></textarea>
                            </div>
                        </div>

                        <div class="form-buttons">
                            <button type="submit" class="btn-admin btn-guardar">üíæ Guardar Producto</button>
                            <button type="button" class="btn-admin btn-cancelar" onclick="ocultarFormulario()">
                                ‚ùå Cancelar
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Estad√≠sticas -->
                <div class="estadisticas">
                    <div class="stat-card">
                        <h3>üì¶ Total Productos</h3>
                        <p id="total-productos">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>‚úÖ Activos</h3>
                        <p id="productos-activos">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>üí∞ Valor Inventario</h3>
                        <p id="valor-inventario">$0.00</p>
                    </div>
                </div>

                <!-- Lista de Productos -->
                <div class="lista-admin">
                    <div class="lista-header">
                        <h3>üìã Lista de Productos</h3>
                        <div class="busqueda-rapida">
                            <input type="text" id="busqueda-rapida" placeholder="Buscar productos...">
                        </div>
                    </div>
                    
                    <div class="tabla-productos-container">
                        <table id="tabla-productos">
                            <thead>
                                <tr>
                                    <th>Imagen</th>
                                    <th data-sort="codigo">C√≥digo üîΩ</th>
                                    <th data-sort="nombre">Nombre</th>
                                    <th data-sort="categoria">Categor√≠a</th>
                                    <th data-sort="precio">Precio</th>
                                    <th data-sort="estado">Estado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="cuerpo-tabla">
                                <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Modal de Confirmaci√≥n -->
    <div id="modal-confirmar" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>‚ö†Ô∏è Confirmar Eliminaci√≥n</h3>
            <p id="mensaje-confirmacion">¬øEst√°s seguro de que quieres eliminar este producto?</p>
            <div class="modal-buttons">
                <button class="btn-admin btn-eliminar-confirm" onclick="confirmarEliminacion()">
                    ‚úÖ S√≠, Eliminar
                </button>
                <button class="btn-admin btn-cancelar" onclick="cerrarModal()">
                    ‚ùå Cancelar
                </button>
            </div>
        </div>
    </div>

    <script src="js/crud-productos.js"></script>
</body>
</html>